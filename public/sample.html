<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Simple Website with Hero Section</title>
    <style>
      /* Basic CSS for the layout */
      body {
        font-family: sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f4f9;
        color: #333;
      }

      .hero {
        background-color: #b57e3f; /* A pleasant bronze/brown color */
        color: white;
        padding: 60px 20px;
        text-align: center;
        min-height: 400px; /* Ensure a decent height for the section */
      }

      .hero h1 {
        margin-top: 0;
        font-size: 2.5em;
      }

      .hero p {
        font-size: 1.2em;
        margin-bottom: 30px;
      }



      /* Define the animation keyframes */
      @keyframes fadeIn {
        to {
          opacity: 1;
          visibility: visible;
        }
      }
      
      /* Styling for the controls */
      .controls {
          display: flex;
          justify-content: center;
          gap: 30px;
          margin-top: 20px;
      }
      .controls label, .controls select {
          color: white;
          font-weight: bold;
      }
      .controls select {
          padding: 5px 10px;
          border-radius: 5px;
          border: none;
      }

      .booking-widget-iframe {
  opacity: 0;
  visibility: hidden;
  animation-name: Show2Sec;
  animation-duration: 0.5s;
  animation-delay: 1500ms;
  animation-fill-mode: forwards;
}

@keyframes Show2Sec {
  to {
    opacity: 1;
    visibility: visible;
  }
}
    </style>
  </head>
  <body>
    <header></header>

    <main>
      <section class="hero">
        <h1>Welcome to Our Website!</h1>
        <p>This is a simple hero section. Below is the embedded content.</p>

        <div>
            <iframe
              class="booking-widget-iframe"
              src="" title="Interactive Booking Widget"
              loading="lazy"
              style="border: none"
              allow="payment"
              scrolling="no"
            >
              <p>
                Your browser does not support this interactive content. Please visit
                our <a href="http://localhost:3000/en">booking page</a> directly.
              </p>
            </iframe>
        </div>

        <div class="controls">
          <div>
            <label for="language-select">Select Language:</label>
            <select id="language-select">
              <option value="en">English</option>
              <option value="es">Spanish</option>
              <option value="fr">French</option>
              <option value="de">German</option>
            </select>
          </div>

          <div>
            <label for="version-select">Select Version:</label>
            <select id="version-select">
              <option value="v1">Version 1</option>
              <option value="v2">Version 2</option>
            </select>
          </div>
        </div>
      </section>

      <section style="padding: 40px; text-align: center">
        <h2>More Content Here</h2>
        <p>
          You can add more sections, details, and features below the hero area.
        </p>
      </section>
    </main>

    <footer></footer>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const languageSelect = document.getElementById("language-select");
        const versionSelect = document.getElementById("version-select");
        const iframe = document.querySelector(".booking-widget-iframe");
        
        // --- Initialization ---

        // 1. Get current domain/hostname
        // Use 'localhost:3000' as a safe default if the environment is unusual,
        // but typically you use window.location.host
        const host = window.location.host; 
        const urlParams = new URLSearchParams(window.location.search);

        // 2. Set initial values based on URL parameters or defaults
        const initialLang = urlParams.get("lang") || "en";
        const initialVersion = urlParams.get("version") || "v2"; // Assuming v2 is the default

        // 3. Update the <select> elements to reflect the initial values
        languageSelect.value = initialLang;
        versionSelect.value = initialVersion;

        // 4. Function to build and set the iframe source
        const updateIframeSrc = () => {
          const lang = languageSelect.value;
          const version = versionSelect.value;
          // Dynamically build the source URL
          iframe.src = `https://${host}/${lang}/embeddable/${version}`;
        };

        // --- Event Listeners ---
        
        // Update the iframe source whenever a select box changes
        languageSelect.addEventListener("change", updateIframeSrc);
        versionSelect.addEventListener("change", updateIframeSrc);

        // Call the function once to set the initial source when the page loads
        updateIframeSrc(); 
      });
    </script>
  </body>
</html>